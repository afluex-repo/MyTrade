@model MyTrade.Models.Dashboard

@{
    ViewBag.Title = "UserDashBoard";
    Layout = "~/Views/Shared/_UserLayout.cshtml";
}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
    .referral {
        font-weight: 600;
        color: #ff0000;
        font-size: 23px;
        letter-spacing: 0;
    }

    .referral-url {
        background-color: #f5e2e2;
        padding: 5px 20px;
        border: 1px solid red;
        border-radius: 20px;
    }

    @@media only screen and (min-width: 1200px) {
        .referral-url {
            /*width: 600px;*/
        }
    }

    .btn_my_referral {
        position: absolute;
        top: 0px;
        right: 92px;
        font-size: 18px;
        text-decoration: none;
        color: #fff;
        font-weight: 700;
    }

    .modal-footer {
        border: none;
    }

    .s-icon a {
        /* background-color: #eb8153; */
        border-radius: 5px;
        margin: 10px;
        width: 35px;
        height: 35px;
        line-height: 33px;
        display: inline-block;
        text-align: center;
        color: white;
        display: inline-block;
        text-align: center;
        white-space: nowrap;
        vertical-align: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        border: 1px solid transparent;
    }
</style>

<div class="layout-px-spacing">
    <div class="row layout-top-spacing">
        @*<div class="col-xl-2 col-lg-6 col-md-6 col-sm-12 col-12 layout-spacing">
            <div class="widget widget-card-four">
                <div class="widget-content">
                    <div class="w-header">
                        <div class="w-info">
                            <h6 class="value">Total Business</h6>
                        </div>
                    </div>
                    <div class="w-content">
                        <div class="w-info">
                            <p class="value">@ViewBag.TotalBusiness</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>*@
        <div class="col-xl-3 col-lg-6 col-md-6 col-sm-12 col-12 layout-spacing">
            <div class="widget widget-card-four">
                <div class="widget-content">
                    <div class="w-header">
                        <div class="w-info">
                            <h6 class="value">Self Business</h6>
                        </div>
                    </div>
                    <div class="w-content">
                        <div class="w-info">
                            <p class="value">@ViewBag.SelfBusiness</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-lg-6 col-md-6 col-sm-12 col-12 layout-spacing">
            <div class="widget widget-card-four">
                <div class="widget-content">
                    <div class="w-header">
                        <div class="w-info">
                            <h6 class="value">Team Business</h6>
                        </div>
                    </div>
                    <div class="w-content">
                        <div class="w-info">
                            <p class="value">@ViewBag.TeamBusiness</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xl-2 col-lg-6 col-md-6 col-sm-12 col-12 layout-spacing">
            <div class="widget widget-card-four">
                <div class="widget-content">
                    <div class="w-header">
                        <div class="w-info">
                            <h6 class="value">Total Direct</h6>
                        </div>
                        @*<div class="task-action">
                                <div class="dropdown">
                                    <a>
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-more-horizontal"><circle cx="5" cy="12" r="1"></circle></svg>
                                    </a>
                                </div>
                            </div>*@
                    </div>
                    <div class="w-content">
                        <div class="w-info">
                            <p class="value">@ViewBag.TotalDirect</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xl-2 col-lg-6 col-md-6 col-sm-12 col-12 layout-spacing">
            <div class="widget widget-card-four">
                <div class="widget-content">
                    <div class="w-header">
                        <div class="w-info">
                            <h6 class="value">Total Active</h6>
                        </div>
                        @*<div class="task-action">
                                <div class="dropdown">
                                    <a>
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-more-horizontal"><circle cx="5" cy="12" r="1"></circle></svg>
                                    </a>
                                </div>
                            </div>*@
                    </div>
                    <div class="w-content">
                        <div class="w-info">
                            <p class="value">@ViewBag.TotalActive</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xl-2 col-lg-6 col-md-6 col-sm-12 col-12 layout-spacing">
            <div class="widget widget-card-four">
                <div class="widget-content">
                    <div class="w-header">
                        <div class="w-info">
                            <h6 class="value">Total In-Active</h6>
                        </div>
                        @*<div class="task-action">
                                <div class="dropdown">
                                    <a>
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-more-horizontal"><circle cx="5" cy="12" r="1"></circle></svg>
                                    </a>
                                </div>
                            </div>*@
                    </div>
                    <div class="w-content">
                        <div class="w-info">
                            <p class="value">@ViewBag.TotalInActive</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    @if (ViewBag.Status == "Active")
    {
        <div class="card">
            <div class="card-body">
                <h6 class="referral">Referral Link</h6>
                <div class="row my-2">
                    <div class="col-xl-10 col-lg-10 col-md-10 col-sm-10 col-10">
                        <div class="referral-url copy">
                            <a target="_blank" style="font-size: 14px;" href="http://mytrade.co.in//Home/Registration?Pid=@Session["Pk_UserId"].ToString()">http://mytrade.co.in//Home/Registration?Pid=@Session["Pk_UserId"].ToString()</a>
                            @*<button type="button" id="btnLeft" class="btn_my_referral">
                                    <i class="far fa-copy" id="left"></i> Copy
                                </button>*@
                        </div>
                    </div>
                    <div class="col-xl-2 col-lg-2 col-md-2 col-sm-2 col-2 p-0">
                        <button type="button" class="btn btn-sm btn-primary" data-toggle="modal" data-target="#exampleModal">
                            <i class="fa fa-share"></i>
                        </button>
                        <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="exampleModalLabel">Share Link On</h5>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    <div class="modal-body">
                                        <div class="card" style="border:none">
                                            <div class="">
                                                @if (Session["LoginId"].ToString() != "")
                                                {
                                                    var link =Session["Pk_UserId"].ToString();

                                                    <span class="s-icon"><a href="mailto:?subject= Referral Link &amp;body=http://mytrade.co.in//Home/Registration?Pid=@link. Thanks." target="_blank" style="background:#871505"><i class="fa fa-envelope fa-lg"></i></a></span>
                                                    <span class="s-icon"><a href="https://api.whatsapp.com/send?text=http://mytrade.co.in//Home/Registration?Pid=@Session["Pk_UserId"].ToString()" target="_blank" style="background:#42f560" data-action="share/whatsapp/share"><i class="fa fa-whatsapp fa-lg"></i></a></span>
                                                    <span class="s-icon"><a href="https://www.facebook.com/sharer.php?u=http://mytrade.co.in//Home/Registration?Pid=@Session["Pk_UserId"].ToString()" target="_blank" style="background:#4267B2"><i class="fa fa-facebook fa-lg"></i></a></span>
                                                    <span class="s-icon"><a href="https://www.instagram.com/?url=http://mytrade.co.in//Home/Registration?Pid=@Session["Pk_UserId"].ToString()" target="_blank" style="background:#E1306C"><i class="fa fa-instagram fa-lg"></i></a></span>
                                                    <span class="s-icon"><a href="https://twitter.com/intent/tweet?text=http://mytrade.co.in//Home/Registration?Pid=@Session["Pk_UserId"].ToString()" target="_blank" style="background:#1DA1F2"><i class="fa fa-twitter fa-lg"></i></a></span>
                                                }
                                            </div>
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    }

    <br />
    @if (ViewBag.TotalDirect != "0")
    {
        <div class="card">
            <div class="card-body">
                <div id="chartDonut" class="col-xl-12 layout-spacing">

                    <div class="widget-header">
                        <div class="row">
                            <div class="col-xl-6 col-md-6 col-sm-6 col-6">
                                <h4>User </h4>
                                <div id="AssociateDetails1" style="width: 100%; height: 300px;"></div>
                            </div>
                            @if (ViewBag.TotalBusiness != "0.00")
                            {
                                <div class="col-xl-6 col-md-6 col-sm-6 col-6">
                                    <h4>Business</h4>
                                    <div id="PayoutDetails1" style="width: 100%; height: 300px;"></div>
                                </div>
                            }
                        </div>
                    </div>
                </div>
            </div>
        </div>
    }


</div>
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">

    google.load("visualization", "1", { packages: ["corechart"] });
    google.setOnLoadCallback(drawBikePieChart);
    function drawBikePieChart() {
        var data = google.visualization.arrayToDataTable([
          ['User', 'Status'],
          ['Active', @ViewBag.TotalActive],
          ['InActive', @ViewBag.TotalInActive]
        ]);
        var bikeChart = new google.visualization.PieChart(document.getElementById('AssociateDetails1'));
        bikeChart.draw(data, {
            legend: {
                position: 'labeled'
            },
            sliceVisibilityThreshold: 0
        });
    }
</script>
<script type="text/javascript">

    google.load("visualization", "", { packages: ["corechart"] });
    google.setOnLoadCallback(drawBikePieChart2);
    function drawBikePieChart2() {
        var data = google.visualization.arrayToDataTable([
          ['Business', 'Rs.'],
          ['Tr1 Business', @ViewBag.Tr1Business],
          ['Tr2 Business', @ViewBag.Tr2Business]
        ]);
        var bikeChart = new google.visualization.PieChart(document.getElementById('PayoutDetails1'));
        //bikeChart.draw(data);
        bikeChart.draw(data, {
            legend: {
                position: 'labeled'
            },
            sliceVisibilityThreshold: 0
        });
    }
</script>

